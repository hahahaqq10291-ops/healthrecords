<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up - Student Health Record Management System</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/register.css') }}"
    />
    <style>
      .flash-messages {
        margin: 0 0 20px 0;
      }
      .flash-message {
        padding: 12px 15px;
        margin-bottom: 10px;
        border-radius: 8px;
        font-weight: 500;
        font-size: 13px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border-left: 4px solid;
        animation: slideInDown 0.3s ease-out;
      }
      @keyframes slideInDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .flash-success {
        background-color: rgba(212, 237, 218, 0.9);
        color: #155724;
        border-left-color: #28a745;
      }
      .flash-danger {
        background-color: rgba(248, 215, 218, 0.9);
        color: #721c24;
        border-left-color: #dc3545;
      }
      .flash-info {
        background-color: rgba(209, 236, 241, 0.9);
        color: #0c5460;
        border-left-color: #17a2b8;
      }
    </style>
  </head>
  <body>
    <div class="register-container">
      <div class="glassmorphism-card">
        <div class="register-header">
          <h1>LYFJSHS</h1>
          <h3>Create Account</h3>
          <p>Join us and manage your health records</p>
        </div>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
          <div class="flash-message flash-{{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
        {% endif %} {% endwith %}

        <form
          action="{{ url_for('register') }}"
          method="POST"
          class="register-form"
          id="registerForm"
          onsubmit="return validateRegisterForm()"
        >
          <div class="form-group">
            <input
              type="text"
              id="fullname"
              name="fullname"
              placeholder="Full Name"
              required
              minlength="3"
              maxlength="100"
              pattern="[a-zA-Z\s]+"
              title="Full name should contain only letters and spaces"
            />
          </div>

            <div class="form-group">
            <input
              type="text"
              id="advisory_class"
              name="advisory_class"
              placeholder="Advisory Class / Section (e.g., Grade 10-A)"
              maxlength="50"
            />
          </div>

          <div class="form-group">
            <input
              type="text"
              id="username"
              name="username"
              placeholder="Username"
              required
              minlength="3"
              maxlength="50"
              pattern="[a-zA-Z0-9_]+"
              title="Username should contain only letters, numbers, and underscores"
            />
          </div>

          <div class="form-group">
            <input
              type="email"
              id="email"
              name="email"
              placeholder="Email Address"
              required
              maxlength="120"
            />
          </div>

          <div class="form-group">
            <input
              type="password"
              id="password"
              name="password"
              placeholder="Password (min 6 characters)"
              required
              minlength="6"
              maxlength="100"
            />
          </div>

          <div class="form-group">
            <input
              type="password"
              id="confirm_password"
              name="confirm_password"
              placeholder="Confirm Password"
              required
              minlength="6"
              maxlength="100"
            />
          </div>

        

          <button type="submit" class="btn-signup">Sign Up</button>
          <br>
          <br>
          <p class="signin-text">
            Already have an account?
            <a href="{{ url_for('login') }}">Sign in</a>
          </p>
        </form>
      </div>
    </div>
    <script>
      function validateRegisterForm() {
        const fullname = document.getElementById("fullname").value.trim();
        const username = document.getElementById("username").value.trim();
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value;
        const confirmPassword =
          document.getElementById("confirm_password").value;

        // Validate fullname
        if (fullname.length < 3) {
          alert("Full name must be at least 3 characters long");
          return false;
        }
        if (!/^[a-zA-Z\s]+$/.test(fullname)) {
          alert("Full name should contain only letters and spaces");
          return false;
        }

        // Validate username
        if (username.length < 3) {
          alert("Username must be at least 3 characters long");
          return false;
        }
        if (!/^[a-zA-Z0-9_]+$/.test(username)) {
          alert(
            "Username should contain only letters, numbers, and underscores"
          );
          return false;
        }

        // Validate email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          alert("Please enter a valid email address");
          return false;
        }

        // Validate password
        if (password.length < 6) {
          alert("Password must be at least 6 characters long");
          return false;
        }

        // Validate password match
        if (password !== confirmPassword) {
          alert("Passwords do not match");
          return false;
        }

        return true;
      }
    </script>
  </body>
</html>
